Вытащил инструменты для снятия/сериализации-загрузки дерева из наработок по атрибутным грамматикам (SECR-2018 etc).
На их базе будет разработан пакет снятия-передачи снапшотов дерева процессов (Linux C/R).

Снять дерево процессов с credentials(pid, ppid, sid, pgid) и сохранить в дамп на диск:

$python3 pstree.py pkl <filename>

Также есть возможность сохранять файловые дескрипторы (см. pstree.py), которая будет добавлена в API.

В случае пустого <filename> название будет содержать timestamp, например: pstree_dump_2018-10-24\ 13\:43\:06.306010.pkl
Изначально поддерживался текстовый формат, на данный момент можно выводить трочную запись как $python3 pstree.py txt <filename>
Восстановление из строки не тестировалось, если интересует рабочая версия строчных дампов, см. parser.py из репозитория nefanov/tree.

Восстановить дерево из файла (скрипт приложен для примера):

$python3 load_from_pickle.py <filename>
